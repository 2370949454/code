{"version":3,"sources":["webpack:///./src/assets/image/loading_read.gif","webpack:///./src/assets/image/reader_menu_chenjin_unchecked.png","webpack:///./src/components/chapter.vue?840e","webpack:///./src/components/chapter.vue","webpack:///src/components/chapter.vue","webpack:///src/components/Read.vue","webpack:///./src/components/Read.vue?3b87","webpack:///./src/components/Read.vue"],"names":["module","exports","__webpack_require__","p","components_chapter","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","src","alt","on","click","$event","$emit","_v","ref","_l","chapter","index","key","_s","title","staticRenderFns","src_components_chapter","normalizeComponent","ssrContext","Read","length","Date","class","text","_this","bid","getChapters","getChaptersContent","_this2","getMore","_this3","params","Chapter","_this4","start","_this5","chaptersUpdated","_this6","limit","link","promiseAry","_ary","content","refresh","n","_this7","chapterCount","finishPullUp","_this8","components_Read","themes","themeIndex","dockShow","id","fontSize","domProps","innerHTML","loadMsg","_e","read","name","chapters","foo","update:foo","directives","rawName","value","expression","stopPropagation","tit","disabled","minus","style","width","add","theme","active","switchTheme","changeChapter","chaptersStart","Read_Component","Read_normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/5.98f84658036a917c9ee5.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/img/loading_read.f002b9e.gif\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/image/loading_read.gif\n// module id = LbpC\n// module chunks = 5","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAMAAADW3miqAAABUFBMVEUAAACqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqpnJSTuAAAAb3RSTlMAJsTwvYFIDw1HvMf80JVcHlmT/R9OiMX45KltMwQDL6bi+siNUSAHOnOw6vS7frnyt3xACl+a1v5rLJlTAtrUkEKP7+6kVVKh7As8h9W4aRsWY7L21z0kwMsldHYTXqzz3vezZRcISpjlATWE0kFJVUATAAABH0lEQVQ4y2NgIAYwMjGzsLKxY5fk4GTlYmZiZODOBwEeXj5+AVQFAoJCvDxgSW4G4XwRUTFxCRBHUkpaRhYkLycvraAIElFSVlFVyxdmyM8HCatraGppg4R1dFn19A1ALGZDI2MTkBxQBUQRxHmmZuYWYAsUFSzl5WDCqIpAwMo6P98G1XWYihiwClBbUT4EUEHRqMNHFRGhyBa/IluggF2+vYOjLC5FcsZO9vl2DI7OwIh1cXXjwFRk4u7hCZR0dmRg8PL28QUyJfz8A5AVBQYFhwCFQ8XCvKB6wjUjgGWDRaSRPERRVDSTcH6+MFMMI6r7YuPiE4A6Ex3y88EmJyWnpGIrjdLSMzIhic/Tw90Ld5GWlZ2Tm+iQJ8tAOgAAEOuHoLC6bxgAAAAASUVORK5CYII=\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/image/reader_menu_chenjin_unchecked.png\n// module id = eD0m\n// module chunks = 5","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"chapter\"},[_c('section',{staticClass:\"chapter-header\"},[_c('img',{staticClass:\"arrow\",attrs:{\"src\":require(\"../assets/image/batch_download_back.png\"),\"alt\":\"\"},on:{\"click\":function($event){_vm.$emit('update:foo', true)}}}),_vm._v(\" \"),_c('p',[_vm._v(\"目录\")])]),_vm._v(\" \"),_c('section',{ref:\"char\",staticClass:\"chapter-content\"},[_c('ul',{staticClass:\"chapter-list\"},_vm._l((_vm.chapters),function(chapter,index){return _c('li',{key:index,on:{\"click\":function($event){}}},[_vm._v(\"\\n        \"+_vm._s(chapter.title)+\"\\n      \")])}))])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4b14ca2a\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/chapter.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4b14ca2a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./chapter.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./chapter.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./chapter.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4b14ca2a\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./chapter.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4b14ca2a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/chapter.vue\n// module id = null\n// module chunks = ","<template>\r\n  <section class=\"chapter\">\r\n    <section class=\"chapter-header\">\r\n      <img src=\"../assets/image/batch_download_back.png\" alt=\"\" class=\"arrow\" @click=\"$emit('update:foo', true)\"/>\r\n      <p>目录</p>\r\n    </section>\r\n    <section class=\"chapter-content\" ref=\"char\">\r\n      <ul class=\"chapter-list\">\r\n        <li v-for=\"(chapter,index) in chapters\" :key=\"index\" @click=\"\">\r\n          {{chapter.title}}\r\n        </li>\r\n      </ul>\r\n    </section>\r\n  </section>\r\n</template>\r\n<script>\r\n  export default {\r\n    name: \"chapter\",\r\n    props: ['chapters'],\r\n    methods:{\r\n\r\n    }\r\n  }\r\n</script>\r\n<style scoped lang=\"stylus\">\r\n  @import \"../assets/css/public.styl\"\r\n  .chapter {\r\n    position: absolute\r\n    z-index 999\r\n    left: 0\r\n    right: 0\r\n    top: 0\r\n    bottom: 0\r\n    background #fff\r\n    .chapter-header {\r\n      position fixed\r\n      width: 100%\r\n      background #fff\r\n      top: px2rem(0)\r\n      left: px2rem(0)\r\n      padding: px2rem(15) px2rem(10)\r\n      border: px2rem(1) solid #ccc\r\n\r\n      .arrow {\r\n        position absolute\r\n      }\r\n      p {\r\n        font-size: px2rem(32)\r\n        text-align center\r\n      }\r\n    }\r\n    .chapter-content {\r\n      position: absolute\r\n      top: px2rem(100)\r\n      z-index 2\r\n      bottom: 0\r\n      width: 100%\r\n      .chapter-list {\r\n        width: 100%\r\n        li {\r\n          font-size: px2rem(28)\r\n          border-bottom: px2rem(1) solid #ccc\r\n          color: #b3bab5\r\n          width: 100%\r\n          height: px2rem(80)\r\n          line-height: px2rem(80)\r\n          padding: px2rem(5) px2rem(20)\r\n        }\r\n      }\r\n    }\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/chapter.vue","<template>\r\n  <div class=\"read-page\">\r\n    <div class=\"read-container\" @click=\"dockShow = !dockShow\" :class=\"themes[themeIndex]['class']\" ref=\"wrapper\">\r\n      <!--阅读-->\r\n      <main v-if=\"read\" id=\"read\">\r\n        <div :class=\"['read_content', 'fs-' + fontSize]\" v-html=\"content\"></div>\r\n        <p class=\"pull-warpper\">\r\n          <img v-if=\"!loadMsg\" :src=\"require('../assets/image/loading_read.gif')\" alt=\"\"><br>\r\n          <span>{{loadMsg}}</span>\r\n        </p>\r\n      </main>\r\n      <!--目录-->\r\n      <transition v-if=\"!read\" name=\"fade\">\r\n        <Chapter :chapters=\"chapters\" :foo.sync=\"read\"/>\r\n      </transition>\r\n    </div>\r\n    <!--dock-->\r\n    <transition-group v-if=\"read\" name=\"read-setting\">\r\n      <div :key=\"0\" v-show=\"dockShow\" class=\"dock dock-title\" @click.stop>\r\n        <Arrows class=\"arrow\"/>\r\n        <p class=\"reader_icon\">返回</p>\r\n        <p class=\"reader-title\">{{tit}}</p>\r\n        <section class=\"reader-right\">\r\n          <img src=\"../assets/image/reader_menu_chenjin_unchecked.png\" alt=\"\">\r\n        </section>\r\n      </div>\r\n      <div :key=\"1\" v-show=\"dockShow\" class=\"dock dock-setting\" @click.stop>\r\n        <section class=\"fontSize\">\r\n          <button :disabled=\"fontSize === 1\" class=\"minus\" @click=\"minus\">Aa-\r\n          </button>\r\n          <div class=\"line\">\r\n            <span class=\"line_red\" :style=\"{width: fontSize/5*100 + '%'}\"></span>\r\n          </div>\r\n          <button :disabled=\"fontSize === 5\" class=\"add\" @click=\"add\">Aa+\r\n          </button>\r\n        </section>\r\n        <section class=\"theme-btn\">\r\n          <button v-for=\"(theme,n) in themes\" class=\"btn\" :class=\"{active: themeIndex === n}\" @click=\"switchTheme(n)\">\r\n            {{theme['text']}}\r\n          </button>\r\n        </section>\r\n        <section class=\"reader_cut\">\r\n          <button disabled>上一章</button>\r\n          <button @click=\"read = false\" disabled>目录</button>\r\n          <router-view/>\r\n          <button @click=\"changeChapter(chaptersStart,1)\">下一章</button>\r\n        </section>\r\n      </div>\r\n    </transition-group>\r\n  </div>\r\n</template>\r\n<script>\r\n  import Arrows from '../base/Arrows'\r\n  import {getRead, getReadContent} from \"../api\"\r\n  import BScroll from 'better-scroll'\r\n  import Chapter from './chapter.vue'\r\n\r\n  export default {\r\n    name: 'read',\r\n    computed: {\r\n      chaptersCount() {\r\n        return this.chapters.length\r\n      }\r\n    },\r\n    data() {\r\n      return {\r\n        bid: '',\r\n        tit: '',\r\n        chaptersUpdated: new Date(),\r\n        chapters: [],\r\n        chaptersStart: 0,\r\n        limit: 1,\r\n        themes: [\r\n          {class: 'theme-default', text: '默认'},\r\n          {class: 'theme-dark', text: '夜间'},\r\n          {class: 'theme-green', text: '护眼'}\r\n        ],\r\n        chaptersData: [],\r\n        themeIndex: 0,\r\n        fontSize: 2,\r\n        read: true,\r\n        template: '<h2 id=\"c-1\">title</h2><p>content</p>',\r\n        content: '',\r\n        dockShow: false,\r\n        loadMsg: '',\r\n        cur: 1,\r\n      }\r\n    },\r\n    watch: {\r\n      async $route(n, o) {\r\n        this.read = true\r\n        if (n.name !== 'read') return this.dockShow = false\r\n        if (n.params['bid'] !== this.bid) {\r\n          this.bid = n.params['bid']\r\n          this.tit = ''\r\n          this.chaptersData = []\r\n          this.chaptersStart = 0;\r\n          this.content = ''\r\n          await this.getChapters()\r\n          await this.getChaptersContent()\r\n        }\r\n      },\r\n      read() {\r\n        this.$nextTick(() => {\r\n          this.scroll = new BScroll(this.$refs.wrapper, {\r\n            pullUpLoad: {\r\n              threshold: 80\r\n            },\r\n            click: true,\r\n          })\r\n          this.scroll.on('pullingUp', () => {\r\n            this.getMore()\r\n          })\r\n          this.scroll.on('scroll', (pos) => {\r\n            this.dockShow && (this.dockShow = false)\r\n          })\r\n        })\r\n      }\r\n    },\r\n    async created() {\r\n      let {bid} = this.$route.params;\r\n      this.bid = bid;\r\n      await this.getChapters()\r\n      await this.getChaptersContent()\r\n    },\r\n    components: {Arrows, Chapter},\r\n    methods: {\r\n      async changeChapter(start, limit) {\r\n        if (document.querySelector('#c-' + start)) {\r\n          this.scroll.scrollToElement('#c-' + start, 200)\r\n        } else {\r\n          this.chaptersStart = start;\r\n          await this.getChaptersContent()\r\n          this.$nextTick(() => {\r\n            this.scroll.scrollToElement('#c-' + start, 200)\r\n          })\r\n        }\r\n      },\r\n      async getChapters() {\r\n        let {mixToc = {}} = await getRead(this.bid);\r\n        this.chapters = mixToc.chapters || [];\r\n        this.chaptersUpdated = new Date(mixToc.chaptersUpdated);\r\n        if (this.chapters.length === 0) {\r\n          this.content = '内容错误';\r\n        }\r\n      },\r\n      async getChaptersContent() {\r\n        let _ary = this.chapters.slice(this.chaptersStart, this.chaptersStart + this.limit)\r\n        this.tit = _ary[0].title\r\n        let promiseAry = _ary.map(chapters => getReadContent(chapters.link))\r\n        let _result = await Promise.all(promiseAry)\r\n        _ary.forEach((item, index) => {\r\n          item.content = _result[index]['chapter']['body'] || '章节错误!'\r\n        })\r\n        this.chaptersData = this.chaptersData.concat(_ary)\r\n        // this.chaptersData = _ary\r\n\r\n        /*this.content += this.chaptersData.reduce((pre, cur, index) => {\r\n          return pre + `<h2 id=\"${'c-' + (this.chaptersStart + index)}\">${cur.title}</h2><p>${cur.content}</p>`\r\n        }, '');*/\r\n\r\n        this.content = this.chaptersData.reduce((pre, cur, index) => {\r\n          return pre + `<h2 id=\"${'c-' + (index)}\">${cur.title}</h2><p>${cur.content}</p>`\r\n        }, '')\r\n\r\n        this.chaptersStart += this.limit\r\n        this.$nextTick(() => {\r\n          this.scroll && this.scroll.refresh()\r\n        })\r\n      },\r\n      switchTheme(n) {\r\n        if (this.themeIndex === n) return\r\n        this.themeIndex = n\r\n      },\r\n      add() {\r\n        this.fontSize = this.fontSize + 1;\r\n      },\r\n      minus() {\r\n        this.fontSize = this.fontSize - 1;\r\n\r\n      },\r\n      async getMore() {\r\n        if (this.chaptersStart > this.chapterCount) {\r\n          return this.loadMsg = '没有更多了'\r\n        }\r\n        this.loadMsg = '加载中...'\r\n        this.getChaptersContent().then(res => {\r\n          this.scroll.finishPullUp()\r\n          this.$nextTick(() => {\r\n            this.scroll.refresh()\r\n          })\r\n        })\r\n      },\r\n\r\n    },\r\n    mounted() {\r\n      this.$nextTick(() => {\r\n        if (!this.scroll) {\r\n          this.scroll = new BScroll(this.$refs.wrapper, {\r\n            pullUpLoad: {\r\n              threshold: 80\r\n            },\r\n            click: true,\r\n\r\n          })\r\n          this.scroll.on('pullingUp', () => {\r\n            this.getMore()\r\n          })\r\n          this.scroll.on('scroll', (pos) => {\r\n            this.dockShow && (this.dockShow = false)\r\n          })\r\n        } else {\r\n          this.scroll.refresh()\r\n        }\r\n      })\r\n    },\r\n  }\r\n</script>\r\n<style scoped lang=\"stylus\">\r\n  @import \"../assets/css/public.styl\";\r\n  .read-page\r\n    user-select none\r\n  .pull-warpper\r\n    width 100%\r\n    text-align: center\r\n    height px2rem(100)\r\n    img\r\n      display: inline-block\r\n      width px2rem(80)\r\n      height px2rem(80)\r\n    span\r\n      display: block\r\n      font-size px2rem(24)\r\n  .theme-dark\r\n    background: #1e0e0b;\r\n    color: #797979\r\n  .theme-green\r\n    background: #eeffdf;\r\n    color: #444\r\n  .theme-default\r\n    background: #f3e1be;\r\n    color: #5e432e\r\n  .read-container\r\n    position: absolute\r\n    left: 0\r\n    top: 0\r\n    right: 0\r\n    bottom: 0;\r\n    overflow hidden\r\n  #read {\r\n    li {\r\n      color: #5e432e\r\n      text-indent: px2rem(45)\r\n      font-size: px2rem(30);\r\n      letter-spacing: px2rem(2)\r\n    }\r\n  }\r\n  .dock {\r\n    position absolute\r\n    left: 0\r\n    right: 0\r\n    background: #2e2f30;\r\n    opacity .9\r\n    button:disabled {\r\n      opacity .5\r\n    }\r\n\r\n  }\r\n  .dock-title {\r\n    height: px2rem(100);\r\n    display: flex;\r\n    align-items center\r\n    top: 0;\r\n    flex-wrap: wrap;\r\n    .arrow {\r\n      width px2rem(60)\r\n      padding-left: px2rem(20)\r\n      height px2rem(100)\r\n    }\r\n    .reader_icon {\r\n      line-height: 3;\r\n      text-indent 0\r\n      color #fff\r\n      font-size: px2rem(26)\r\n    }\r\n    .reader-title {\r\n      flex 1\r\n      font-size: px2rem(28)\r\n      padding: 0 px2rem(24)\r\n      text-overflow ellipsis\r\n      white-space nowrap\r\n      overflow: hidden\r\n      color: #fff\r\n    }\r\n    .reader-right {\r\n      margin-left auto\r\n      width px2rem(80)\r\n      height px2rem(80)\r\n      display: flex\r\n      justify-content center\r\n      align-items center\r\n      img {\r\n        display: block\r\n        width: px2rem(36)\r\n        height: px2rem(36)\r\n      }\r\n\r\n    }\r\n  }\r\n  .dock-setting {\r\n    background: #2e2f30;\r\n    bottom: 0\r\n    padding px2rem(40) px2rem(20);\r\n    box-sizing border-box\r\n    opacity .9\r\n    p {\r\n      color #fff\r\n      font-size: px2rem(30)\r\n    }\r\n\r\n    .fontSize {\r\n      display: flex\r\n      button {\r\n        background: transparent;\r\n        border: none\r\n        color white\r\n        font-size: px2rem(40);\r\n        height px2rem(60)\r\n        line-height: px2rem(60)\r\n        font-weight: bold\r\n        text-align center;\r\n        margin 0 px2rem(24)\r\n      }\r\n      .line {\r\n        flex 1\r\n        margin: px2rem(29) px2rem(24) 0\r\n        height: px2rem(2)\r\n        background #fff;\r\n\r\n        .line_red {\r\n          width 0\r\n          height: 100%\r\n          display block\r\n          background $mainColor\r\n        }\r\n      }\r\n    }\r\n    .theme-btn {\r\n      width: 100%\r\n      display: flex;\r\n      flex-wrap nowrap\r\n      justify-content: space-around;\r\n      margin-top px2rem(20)\r\n      padding 0 px2rem(20)\r\n      box-sizing border-box\r\n\r\n      button {\r\n        flex 1\r\n        margin 0 px2rem(30)\r\n        background: transparent\r\n        color white\r\n        width: px2rem(160)\r\n        border-radius px2rem(5)\r\n        border px2rem(1) solid #fff\r\n        line-height: 1\r\n        font-size: px2rem(28)\r\n        padding px2rem(10)\r\n        &.active {\r\n          border-color: $mainColor\r\n          color $mainColor\r\n        }\r\n      }\r\n    }\r\n    .reader_cut {\r\n      display: flex;\r\n      flex-wrap nowrap\r\n      justify-content: space-between;\r\n      margin-top px2rem(40)\r\n      padding 0 px2rem(20)\r\n      box-sizing border-box\r\n\r\n      button {\r\n        font-size px2rem(34)\r\n        background: transparent\r\n        border: none\r\n        width 4rem\r\n        text-align: center\r\n        color white\r\n        padding: px2rem(12)\r\n      }\r\n    }\r\n  }\r\n  .read_content {\r\n    padding: px2rem(24);\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/Read.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"read-page\"},[_c('div',{ref:\"wrapper\",staticClass:\"read-container\",class:_vm.themes[_vm.themeIndex]['class'],on:{\"click\":function($event){_vm.dockShow = !_vm.dockShow}}},[(_vm.read)?_c('main',{attrs:{\"id\":\"read\"}},[_c('div',{class:['read_content', 'fs-' + _vm.fontSize],domProps:{\"innerHTML\":_vm._s(_vm.content)}}),_vm._v(\" \"),_c('p',{staticClass:\"pull-warpper\"},[(!_vm.loadMsg)?_c('img',{attrs:{\"src\":require('../assets/image/loading_read.gif'),\"alt\":\"\"}}):_vm._e(),_c('br'),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.loadMsg))])])]):_vm._e(),_vm._v(\" \"),(!_vm.read)?_c('transition',{attrs:{\"name\":\"fade\"}},[_c('Chapter',{attrs:{\"chapters\":_vm.chapters,\"foo\":_vm.read},on:{\"update:foo\":function($event){_vm.read=$event}}})],1):_vm._e()],1),_vm._v(\" \"),(_vm.read)?_c('transition-group',{attrs:{\"name\":\"read-setting\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.dockShow),expression:\"dockShow\"}],key:0,staticClass:\"dock dock-title\",on:{\"click\":function($event){$event.stopPropagation();}}},[_c('Arrows',{staticClass:\"arrow\"}),_vm._v(\" \"),_c('p',{staticClass:\"reader_icon\"},[_vm._v(\"返回\")]),_vm._v(\" \"),_c('p',{staticClass:\"reader-title\"},[_vm._v(_vm._s(_vm.tit))]),_vm._v(\" \"),_c('section',{staticClass:\"reader-right\"},[_c('img',{attrs:{\"src\":require(\"../assets/image/reader_menu_chenjin_unchecked.png\"),\"alt\":\"\"}})])],1),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.dockShow),expression:\"dockShow\"}],key:1,staticClass:\"dock dock-setting\",on:{\"click\":function($event){$event.stopPropagation();}}},[_c('section',{staticClass:\"fontSize\"},[_c('button',{staticClass:\"minus\",attrs:{\"disabled\":_vm.fontSize === 1},on:{\"click\":_vm.minus}},[_vm._v(\"Aa-\\n        \")]),_vm._v(\" \"),_c('div',{staticClass:\"line\"},[_c('span',{staticClass:\"line_red\",style:({width: _vm.fontSize/5*100 + '%'})})]),_vm._v(\" \"),_c('button',{staticClass:\"add\",attrs:{\"disabled\":_vm.fontSize === 5},on:{\"click\":_vm.add}},[_vm._v(\"Aa+\\n        \")])]),_vm._v(\" \"),_c('section',{staticClass:\"theme-btn\"},_vm._l((_vm.themes),function(theme,n){return _c('button',{staticClass:\"btn\",class:{active: _vm.themeIndex === n},on:{\"click\":function($event){_vm.switchTheme(n)}}},[_vm._v(\"\\n          \"+_vm._s(theme['text'])+\"\\n        \")])})),_vm._v(\" \"),_c('section',{staticClass:\"reader_cut\"},[_c('button',{attrs:{\"disabled\":\"\"}},[_vm._v(\"上一章\")]),_vm._v(\" \"),_c('button',{attrs:{\"disabled\":\"\"},on:{\"click\":function($event){_vm.read = false}}},[_vm._v(\"目录\")]),_vm._v(\" \"),_c('router-view'),_vm._v(\" \"),_c('button',{on:{\"click\":function($event){_vm.changeChapter(_vm.chaptersStart,1)}}},[_vm._v(\"下一章\")])],1)])]):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-56b66a98\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Read.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-56b66a98\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Read.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Read.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Read.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-56b66a98\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Read.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-56b66a98\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Read.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}